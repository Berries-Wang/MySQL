# AUTO_INCREMENT Handling in InnoDB
&nbsp;&nbsp;InnoDB provides a configurable locking mechanism that can significantly improve scalability and performance of SQL statements that add rows to tables with AUTO_INCREMENT columns. To use the AUTO_INCREMENT mechanism with an InnoDB table, an AUTO_INCREMENT column must be defined as the first or only column of some index such that it is possible to perform the equivalent of an indexed SELECT MAX(ai_col) lookup on the table to obtain the maximum column value. The index is not required to be a PRIMARY KEY or UNIQUE, but to avoid duplicate values in the AUTO_INCREMENT column, those index types are recommended.(InnoDB提供了一种可配置的锁机制，可以显著提高SQL语句在AUTO_INCREMENT列的表中添加行的可伸缩性和性能。要在InnoDB表中使用AUTO_INCREMENT机制，必须将AUTO_INCREMENT列定义为某个索引的第一列或唯一列，以便可以在表上执行相当于索引SELECT MAX(ai_col)查找以获得最大列值。索引不需要是PRIMARY KEY或UNIQUE，但为了避免AUTO_INCREMENT列中的重复值，建议使用这些索引类型。)
```txt
     mysql> create table auto_inc( id bigint primary key ,  id_a bigint auto_increment);
     ERROR 1075 (42000): Incorrect table definition; there can be only one auto column and it must be defined as a key
     
     mysql> create table auto_inc( id bigint primary key ,  id_a bigint auto_increment, index aa(id_a) );
     Query OK, 0 rows affected (0.04 sec)
     
     mysql> insert into auto_inc(id,id_a) values(1,1);
     Query OK, 1 row affected (0.02 sec)
     
     mysql> insert into auto_inc(id,id_a) values(2,1);
     Query OK, 1 row affected (0.01 sec)
     
     mysql> insert into auto_inc(id,id_a) values(2,1);
     ERROR 1062 (23000): Duplicate entry '2' for key 'PRIMARY'
     mysql> insert into auto_inc(id) values(3);
     Query OK, 1 row affected (0.02 sec)
     
     mysql> select * from auto_inc;
     +----+------+
     | id | id_a |
     +----+------+
     |  1 |    1 |
     |  2 |    1 |
     |  3 |    2 |
     +----+------+
     3 rows in set (0.00 sec)
     
     mysql>

      # 值不允许重复吗? 经过测试，是可以的
```