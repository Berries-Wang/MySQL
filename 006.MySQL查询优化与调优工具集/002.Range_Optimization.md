# 8.2.1.2 Range Optimization (范围优化)
&nbsp;&nbsp;The range access method uses a single index to retrieve a subset of table rows that are contained within one or several index value intervals. It can be used for a single-part or multiple-part index. The following sections describe conditions under which the optimizer uses range access.
> 范围查找使用单索引去检索包含在一个或多个索引值区间内表行的子集。他能够使用单字段或多字段索引。下面几节描述优化器使用范围访问的条件.

## Range Access Method for Single-Part Indexes
&nbsp;&nbsp;For a single-part index, index value intervals can be conveniently represented by corresponding conditions in the WHERE clause, denoted as range conditions rather than “intervals.”
> 对于单字段索引，索引值区间可以方便的使用WHERE子句中的相应条件表示，表示为范围条件而不是“范围”

&nbsp;&nbsp;The definition of a range condition for a single-part index is as follows:
> 单字段索引范围条件定义如下:
1. For both BTREE and HASH indexes, comparison of a key part with a constant value is a range condition when using the =, <=>, IN(), IS NULL, or IS NOT NULL operators.
   > 对于BTREE 和 HASH索引，当使用 = 、 <=> 、 IN 、 IS　NULL 或IS NOT NULL操作符时，索引部分字段与常量值比较是一个范围条件。
2. Additionally, for BTREE indexes, comparison of a key part with a constant value is a range condition when using the >, <, >=, <=, BETWEEN, !=, or <> operators, or LIKE comparisons if the argument to LIKE is a constant string that does not start with a wildcard character.
   > 此外，对于BTREE索引，当使用 = 、 <=> 、 IN 、 IS　NULL 或IS NOT NULL操作符时以及使用LIKE比较符且LIKE的参数不是以通配符开始的常量字符串时，索引部分字段与常量值比较是一个范围条件。
3. For all index types, multiple range conditions combined with OR or AND form a range condition.
   > 对于所有索引类型，多个范围条件与OR或AND组合形成一个范围条件

&nbsp;&nbsp;常量值的概念:
1. A constant from the query string
   > 来自于查询字符串的常量
3. A column of a const or system table from the same join
   > 来自同一连接的const表或system表的一列
4. The result of an uncorrelated subquery
   > 不相关的子查询的结果
5. Any expression composed entirely from subexpressions of the preceding types
   > 任何完全由上述类型的子表达式组成的表达式

&nbsp;&nbsp;Some nonconstant values may be converted to constants during the optimizer constant propagation phase.
  > 在优化器常量传播阶段一些非常量值或许会被转换为常量。

&nbsp;&nbsp;MySQL tries to extract range conditions from the WHERE clause for each of the possible indexes. During the extraction process, conditions that cannot be used for constructing the range condition are dropped, conditions that produce overlapping ranges are combined, and conditions that produce empty ranges are removed.
> MySQL 尝试从WHERE子句中为每个可能的索引提取范围条件。在提取过程中，不能用于构造范围条件的条件会被删除，产生重叠范围的条件将会被合并，产生空范围的条件将被删除。

&nbsp;&nbsp;举例如下:
```sql
  # key1 is an indexed column and nonkey is not indexed:
  SELECT * FROM t1 WHERE
  (key1 < 'abc' AND (key1 LIKE 'abcde%' OR key1 LIKE '%b')) OR
  (key1 < 'bar' AND nonkey = 4) OR
  (key1 < 'uux' AND key1 > 'z');

  

```